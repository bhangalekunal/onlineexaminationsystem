import { ChangeDetectionStrategy, Component, EventEmitter, HostBinding, Input, Optional, Output } from '@angular/core';
import { SidebarAccordionComponent } from './sidebar-accordion/sidebar-accordion.component';
export class SidebarComponent {
    constructor(_container) {
        this._container = _container;
        this.classNameSidebar = true;
        this.headerClicked = new EventEmitter();
        this.headerTouchMoved = new EventEmitter();
        this.headerTouchEnded = new EventEmitter();
        this.openedChange = new EventEmitter();
        this.classNameSidebarOpened = false;
        this._headers = [];
        this._contents = [];
        this._opened = false;
        if (!this._container) {
            throw new Error('<ng-sidebar-accordion> must be inside a <ng-sidebar-accordion></ng-sidebar-accordion>.');
        }
    }
    get opened() {
        return this._opened;
    }
    ;
    set opened(value) {
        if (this._opened !== value) {
            this._opened = value;
            this.classNameSidebarOpened = value;
            this.openedChange.emit({ sender: this, opened: value });
        }
    }
    get _headersLength() {
        return this._headers.length;
    }
    get _contentsLength() {
        return this._contents.length;
    }
    ngOnInit() {
        this._container._addSidebar(this);
    }
    ngOnDestroy() {
        this._container._removeSidebar(this);
        this.unsubscribe();
    }
    _addHeader(header) {
        if (this._headersLength > 0) {
            throw new Error('<ng-sidebar-header> must be only one.');
        }
        this._headers.push(header);
        this.subscribe(header);
    }
    _removeHeader(header) {
        const index = this._headers.indexOf(header);
        if (index !== -1) {
            this._headers.splice(index, 1);
        }
    }
    _addContent(content) {
        if (this._contentsLength > 0) {
            throw new Error('<ng-sidebar-content> must be only one.');
        }
        this._contents.push(content);
    }
    _removeContent(content) {
        const index = this._contents.indexOf(content);
        if (index !== -1) {
            this._contents.splice(index, 1);
        }
    }
    open() {
        this.opened = true;
    }
    close() {
        this.opened = false;
    }
    subscribe(header) {
        header.clicked.subscribe(() => {
            this.headerClicked.emit(this);
        });
        header.touchMoved.subscribe(e => {
            this.headerTouchMoved.emit({ sender: this, originalEvent: e });
        });
        header.touchEnded.subscribe(e => {
            this.headerTouchEnded.emit({ sender: this, originalEvent: e });
        });
    }
    unsubscribe() {
        this._headers.forEach(header => {
            header.clicked.unsubscribe();
            header.touchMoved.unsubscribe();
            header.touchEnded.unsubscribe();
        });
    }
}
SidebarComponent.decorators = [
    { type: Component, args: [{
                selector: 'ng-sidebar',
                template: `
    <ng-content select="ng-sidebar-header, [ng-sidebar-header]"></ng-content>
    <ng-content select="ng-sidebar-content, [ng-sidebar-content]"></ng-content>
  `,
                changeDetection: ChangeDetectionStrategy.OnPush
            },] }
];
SidebarComponent.ctorParameters = () => [
    { type: SidebarAccordionComponent, decorators: [{ type: Optional }] }
];
SidebarComponent.propDecorators = {
    position: [{ type: Input }, { type: HostBinding, args: ['attr.position',] }],
    classNameSidebar: [{ type: Input }, { type: HostBinding, args: ['class.ng-sidebar',] }],
    className: [{ type: Input }, { type: HostBinding, args: ['class',] }],
    style: [{ type: Input }, { type: HostBinding, args: ['style',] }],
    headerClicked: [{ type: Output }],
    headerTouchMoved: [{ type: Output }],
    headerTouchEnded: [{ type: Output }],
    openedChange: [{ type: Output }],
    classNameSidebarOpened: [{ type: HostBinding, args: ['class.ng-sidebar_opened',] }],
    opened: [{ type: Input }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2lkZWJhci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZy1zaWRlYmFyLWFjY29yZGlvbi9zcmMvbGliL3NpZGViYXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCx1QkFBdUIsRUFDdkIsU0FBUyxFQUNULFlBQVksRUFDWixXQUFXLEVBQ1gsS0FBSyxFQUdMLFFBQVEsRUFDUixNQUFNLEVBQ1AsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFDLHlCQUF5QixFQUFDLE1BQU0saURBQWlELENBQUM7QUFjMUYsTUFBTSxPQUFPLGdCQUFnQjtJQWlCM0IsWUFBZ0MsVUFBcUM7UUFBckMsZUFBVSxHQUFWLFVBQVUsQ0FBMkI7UUFkM0IscUJBQWdCLEdBQUcsSUFBSSxDQUFDO1FBSXhELGtCQUFhLEdBQUcsSUFBSSxZQUFZLEVBQW9CLENBQUM7UUFDckQscUJBQWdCLEdBQUcsSUFBSSxZQUFZLEVBQThCLENBQUM7UUFDbEUscUJBQWdCLEdBQUcsSUFBSSxZQUFZLEVBQThCLENBQUM7UUFDbEUsaUJBQVksR0FBRyxJQUFJLFlBQVksRUFBMEIsQ0FBQztRQUU1QiwyQkFBc0IsR0FBRyxLQUFLLENBQUM7UUFFL0QsYUFBUSxHQUFrQyxFQUFFLENBQUM7UUFDN0MsY0FBUyxHQUFtQyxFQUFFLENBQUM7UUFRL0MsWUFBTyxHQUFHLEtBQUssQ0FBQztRQUx0QixJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRTtZQUNwQixNQUFNLElBQUksS0FBSyxDQUFDLHdGQUF3RixDQUFDLENBQUM7U0FDM0c7SUFDSCxDQUFDO0lBSUQsSUFBYSxNQUFNO1FBQ2pCLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztJQUN0QixDQUFDO0lBQUEsQ0FBQztJQUVGLElBQUksTUFBTSxDQUFDLEtBQWM7UUFDdkIsSUFBSSxJQUFJLENBQUMsT0FBTyxLQUFLLEtBQUssRUFB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QUUsYUFBYSxFQUFFLENBQUMsRUFBQyxDQUFDLENBQUM7UUFDL0QsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRU8sV0FBVztRQUNqQixJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUM3QixNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQzdCLE1BQU0sQ0FBQyxVQUFVLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDaEMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNsQyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7OztZQXpIRixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLFlBQVk7Z0JBQ3RCLFFBQVEsRUFBRTs7O0dBR1Q7Z0JBQ0QsZUFBZSxFQUFFLHVCQUF1QixDQUFDLE1BQU07YUFDaEQ7OztZQWJPLHlCQUF5Qix1QkErQmxCLFFBQVE7Ozt1QkFmcEIsS0FBSyxZQUFJLFdBQVcsU0FBQyxlQUFlOytCQUNwQyxLQUFLLFlBQUksV0FBVyxTQUFDLGtCQUFrQjt3QkFDdkMsS0FBSyxZQUFJLFdBQVcsU0FBQyxPQUFPO29CQUM1QixLQUFLLFlBQUksV0FBVyxTQUFDLE9BQU87NEJBRTVCLE1BQU07K0JBQ04sTUFBTTsrQkFDTixNQUFNOzJCQUNOLE1BQU07cUNBRU4sV0FBVyxTQUFDLHlCQUF5QjtxQkFhckMsS0FBSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXHJcbiAgQ29tcG9uZW50LFxyXG4gIEV2ZW50RW1pdHRlcixcclxuICBIb3N0QmluZGluZyxcclxuICBJbnB1dCxcclxuICBPbkRlc3Ryb3ksXHJcbiAgT25Jbml0LFxyXG4gIE9wdGlvbmFsLFxyXG4gIE91dHB1dFxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge1NpZGViYXJBY2NvcmRpb25Db21wb25lbnR9IGZyb20gJy4vc2lkZWJhci1hY2NvcmRpb24vc2lkZWJhci1hY2NvcmRpb24uY29tcG9uZW50JztcclxuaW1wb3J0IHtTaWRlYmFySGVhZGVyQ29tcG9uZW50fSBmcm9tIFwiLi9zaWRlYmFyLWhlYWRlci5jb21wb25lbnRcIjtcclxuaW1wb3J0IHtTaWRlYmFyQ29udGVudENvbXBvbmVudH0gZnJvbSBcIi4vc2lkZWJhci1jb250ZW50LmNvbXBvbmVudFwiO1xyXG5pbXBvcnQge1NpZGViYXJPcGVuZWRFdmVudEFyZ3N9IGZyb20gXCIuL3NpZGViYXItb3BlbmVkLmV2ZW50LWFyZ3NcIjtcclxuaW1wb3J0IHtTaWRlYmFyTW91c2VUb3VjaEV2ZW50QXJnc30gZnJvbSBcIi4vc2lkZWJhci1tb3VzZS10b3VjaC5ldmVudC1hcmdzXCI7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ25nLXNpZGViYXInLFxyXG4gIHRlbXBsYXRlOiBgXHJcbiAgICA8bmctY29udGVudCBzZWxlY3Q9XCJuZy1zaWRlYmFyLWhlYWRlciwgW25nLXNpZGViYXItaGVhZGVyXVwiPjwvbmctY29udGVudD5cclxuICAgIDxuZy1jb250ZW50IHNlbGVjdD1cIm5nLXNpZGViYXItY29udGVudCwgW25nLXNpZGViYXItY29udGVudF1cIj48L25nLWNvbnRlbnQ+XHJcbiAgYCxcclxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxyXG59KVxyXG5leHBvcnQgY2xhc3MgU2lkZWJhckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95IHtcclxuXHJcbiAgQElucHV0KCkgQEhvc3RCaW5kaW5nKCdhdHRyLnBvc2l0aW9uJykgcG9zaXRpb246ICdsZWZ0JyB8ICdyaWdodCcgfCAndG9wJyB8ICdib3R0b20nO1xyXG4gIEBJbnB1dCgpIEBIb3N0QmluZGluZygnY2xhc3Mubmctc2lkZWJhcicpIGNsYXNzTmFtZVNpZGViYXIgPSB0cnVlO1xyXG4gIEBJbnB1dCgpIEBIb3N0QmluZGluZygnY2xhc3MnKSBjbGFzc05hbWU6IHN0cmluZztcclxuICBASW5wdXQoKSBASG9zdEJpbmRpbmcoJ3N0eWxlJykgc3R5bGU6IENTU1N0eWxlRGVjbGFyYXRpb247XHJcblxyXG4gIEBPdXRwdXQoKSBoZWFkZXJDbGlja2VkID0gbmV3IEV2ZW50RW1pdHRlcjxTaWRlYmFyQ29tcG9uZW50PigpO1xyXG4gIEBPdXRwdXQoKSBoZWFkZXJUb3VjaE1vdmVkID0gbmV3IEV2ZW50RW1pdHRlcjxTaWRlYmFyTW91c2VUb3VjaEV2ZW50QXJncz4oKTtcclxuICBAT3V0cHV0KCkgaGVhZGVyVG91Y2hFbmRlZCA9IG5ldyBFdmVudEVtaXR0ZXI8U2lkZWJhck1vdXNlVG91Y2hFdmVudEFyZ3M+KCk7XHJcbiAgQE91dHB1dCgpIG9wZW5lZENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8U2lkZWJhck9wZW5lZEV2ZW50QXJncz4oKTtcclxuXHJcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5uZy1zaWRlYmFyX29wZW5lZCcpIGNsYXNzTmFtZVNpZGViYXJPcGVuZWQgPSBmYWxzZTtcclxuXHJcbiAgcHJpdmF0ZSBfaGVhZGVyczogQXJyYXk8U2lkZWJhckhlYWRlckNvbXBvbmVudD4gPSBbXTtcclxuICBwcml2YXRlIF9jb250ZW50czogQXJyYXk8U2lkZWJhckNvbnRlbnRDb21wb25lbnQ+ID0gW107XHJcblxyXG4gIGNvbnN0cnVjdG9yKEBPcHRpb25hbCgpIHByaXZhdGUgX2NvbnRhaW5lcjogU2lkZWJhckFjY29yZGlvbkNvbXBvbmVudCkge1xyXG4gICAgaWYgKCF0aGlzLl9jb250YWluZXIpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCc8bmctc2lkZWJhci1hY2NvcmRpb24+IG11c3QgYmUgaW5zaWRlIGEgPG5nLXNpZGViYXItYWNjb3JkaW9uPjwvbmctc2lkZWJhci1hY2NvcmRpb24+LicpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfb3BlbmVkID0gZmFsc2U7XHJcblxyXG4gIEBJbnB1dCgpIGdldCBvcGVuZWQoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5fb3BlbmVkO1xyXG4gIH07XHJcblxyXG4gIHNldCBvcGVuZWQodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgIGlmICh0aGlzLl9vcGVuZWQgIT09IHZhbHVlKSB7XHJcbiAgICAgIHRoaXMuX29wZW5lZCA9IHZhbHVlO1xyXG4gICAgICB0aGlzLmNsYXNzTmFtZVNpZGViYXJPcGVuZWQgPSB2YWx1ZTtcclxuICAgICAgdGhpcy5vcGVuZWRDaGFuZ2UuZW1pdCh7c2VuZGVyOiB0aGlzLCBvcGVuZWQ6IHZhbHVlfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXQgX2hlYWRlcnNMZW5ndGgoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faGVhZGVycy5sZW5ndGg7XHJcbiAgfVxyXG5cclxuICBnZXQgX2NvbnRlbnRzTGVuZ3RoKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NvbnRlbnRzLmxlbmd0aDtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLl9hZGRTaWRlYmFyKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICB0aGlzLl9jb250YWluZXIuX3JlbW92ZVNpZGViYXIodGhpcyk7XHJcbiAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XHJcbiAgfVxyXG5cclxuICBfYWRkSGVhZGVyKGhlYWRlcjogU2lkZWJhckhlYWRlckNvbXBvbmVudCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuX2hlYWRlcnNMZW5ndGggPiAwKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignPG5nLXNpZGViYXItaGVhZGVyPiBtdXN0IGJlIG9ubHkgb25lLicpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2hlYWRlcnMucHVzaChoZWFkZXIpO1xyXG4gICAgdGhpcy5zdWJzY3JpYmUoaGVhZGVyKTtcclxuICB9XHJcblxyXG4gIF9yZW1vdmVIZWFkZXIoaGVhZGVyOiBTaWRlYmFySGVhZGVyQ29tcG9uZW50KTogdm9pZCB7XHJcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuX2hlYWRlcnMuaW5kZXhPZihoZWFkZXIpO1xyXG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xyXG4gICAgICB0aGlzLl9oZWFkZXJzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfYWRkQ29udGVudChjb250ZW50OiBTaWRlYmFyQ29udGVudENvbXBvbmVudCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuX2NvbnRlbnRzTGVuZ3RoID4gMCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJzxuZy1zaWRlYmFyLWNvbnRlbnQ+IG11c3QgYmUgb25seSBvbmUuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fY29udGVudHMucHVzaChjb250ZW50KTtcclxuICB9XHJcblxyXG4gIF9yZW1vdmVDb250ZW50KGNvbnRlbnQ6IFNpZGViYXJDb250ZW50Q29tcG9uZW50KTogdm9pZCB7XHJcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuX2NvbnRlbnRzLmluZGV4T2YoY29udGVudCk7XHJcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XHJcbiAgICAgIHRoaXMuX2NvbnRlbnRzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvcGVuKCk6IHZvaWQge1xyXG4gICAgdGhpcy5vcGVuZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKTogdm9pZCB7XHJcbiAgICB0aGlzLm9wZW5lZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdWJzY3JpYmUoaGVhZGVyOiBTaWRlYmFySGVhZGVyQ29tcG9uZW50KTogdm9pZCB7XHJcbiAgICBoZWFkZXIuY2xpY2tlZC5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICB0aGlzLmhlYWRlckNsaWNrZWQuZW1pdCh0aGlzKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGhlYWRlci50b3VjaE1vdmVkLnN1YnNjcmliZShlID0+IHtcclxuICAgICAgdGhpcy5oZWFkZXJUb3VjaE1vdmVkLmVtaXQoe3NlbmRlcjogdGhpcywgb3JpZ2luYWxFdmVudDogZX0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaGVhZGVyLnRvdWNoRW5kZWQuc3Vic2NyaWJlKGUgPT4ge1xyXG4gICAgICB0aGlzLmhlYWRlclRvdWNoRW5kZWQuZW1pdCh7c2VuZGVyOiB0aGlzLCBvcmlnaW5hbEV2ZW50OiBlfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdW5zdWJzY3JpYmUoKTogdm9pZCB7XHJcbiAgICB0aGlzLl9oZWFkZXJzLmZvckVhY2goaGVhZGVyID0+IHtcclxuICAgICAgaGVhZGVyLmNsaWNrZWQudW5zdWJzY3JpYmUoKTtcclxuICAgICAgaGVhZGVyLnRvdWNoTW92ZWQudW5zdWJzY3JpYmUoKTtcclxuICAgICAgaGVhZGVyLnRvdWNoRW5kZWQudW5zdWJzY3JpYmUoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iXX0=